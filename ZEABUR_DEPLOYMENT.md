# Zeabur部署指南

## 准备工作

1. **创建GitHub仓库**
   - 确保你的代码已经提交到GitHub仓库
   - 仓库应为公开或你已授权Zeabur访问

2. **准备环境变量**
   - 在项目根目录创建`.env`文件，参考`.env.production.example`配置必要的环境变量
   - 关键环境变量包括：
     - `MONGODB_URI`: MongoDB连接字符串
     - `JWT_SECRET`: JWT密钥
     - `QWEN_API_KEY`: 通义千问API密钥
     - `EMAIL_HOST`, `EMAIL_USER`, `EMAIL_PASS`: 邮件配置

## 部署步骤

### 1. 登录Zeabur
- 访问 [Zeabur官网](https://zeabur.com/)
- 使用GitHub账号登录

### 2. 创建项目
- 点击"创建项目"按钮
- 为项目命名（如"anwei-website"）
- 点击"创建"

### 3. 连接GitHub仓库
- 在项目页面点击"添加服务"
- 选择"从GitHub导入"
- 找到并选择你的项目仓库
- 点击"导入"

### 4. 配置服务
- 导入成功后，Zeabur会自动检测项目类型
- 确保构建命令和输出目录正确：
  - 构建命令: `npm install && cd client && npm install && npm run build`
  - 输出目录: `client/build`

### 5. 添加MongoDB服务
- 点击"添加服务"
- 选择"数据库"
- 选择"MongoDB"
- 选择版本（推荐5.0+）
- 点击"创建"

### 6. 配置环境变量
- 在服务页面点击"设置"
- 选择"环境变量"
- 点击"添加环境变量"
- 逐一添加所需的环境变量（参考`.env.production.example`）
- 对于MongoDB，Zeabur会自动提供`MONGODB_URI`环境变量

### 7. 部署应用
- 回到服务页面
- 点击"部署"
- 等待部署完成（首次部署可能需要几分钟）

### 8. 配置域名（可选）
- 在服务页面点击"设置"
- 选择"域名"
- 可以使用Zeabur提供的免费域名，或绑定自己的域名

## 部署后验证

1. **访问应用**
   - 使用Zeabur提供的域名或你绑定的域名访问网站
   - 检查首页、登录、AI聊天等核心功能是否正常

2. **检查API连接**
   - 确认后端API可以正常访问
   - 测试用户注册、登录等需要后端支持的功能

3. **查看日志**
   - 在Zeabur控制台的服务页面，点击"日志"
   - 检查是否有错误信息，并及时修复

## 常见问题

### 1. 部署失败
- 检查构建日志，查看具体错误信息
- 确保所有依赖都已正确安装
- 确认前端构建命令正确

### 2. 数据库连接失败
- 检查`MONGODB_URI`环境变量是否正确
- 确认MongoDB服务已启动

### 3. 环境变量不生效
- 确保在Zeabur控制台正确配置了所有环境变量
- 环境变量更改后需要重新部署应用

### 4. 端口冲突
- 确保应用使用的端口与Zeabur配置的端口一致（默认5000）

## 版本更新

1. **推送代码更新**
   - 将更新后的代码推送到GitHub仓库

2. **触发重新部署**
   - 在Zeabur控制台的服务页面，点击"部署"
   - Zeabur会自动拉取最新代码并重新构建部署

3. **验证更新**
   - 访问应用确认更新已生效
   - 查看日志确保没有新的错误

---

完成以上步骤后，你的anwei网站应该已成功部署到Zeabur平台。如果遇到任何问题，请查看Zeabur文档或联系技术支持。